{"version":3,"file":"default-src_app_locations_search_locations-detail_locations-detail_module_ts.js","mappings":"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","sources":["./src/app/attend/attend-data.model.ts","./src/app/attend/attend.service.ts","./src/app/attend/confirm-attend/confirm-attend.component.ts","./src/app/locations/search/locations-detail/locations-detail-routing.module.ts","./src/app/locations/search/locations-detail/locations-detail.module.ts","./src/app/locations/search/locations-detail/locations-detail.page.ts","./src/app/attend/confirm-attend/confirm-attend.component.html","./src/app/locations/search/locations-detail/locations-detail.page.html"],"sourcesContent":["export class AttendData{\n\n  constructor(\n    public id: string,\n    public locationImage: string,\n    public locationDate: string,\n    public locationTitle: string,\n    public locationGenre: string,\n    public locationPrice: number,\n    public locationId: string,\n    public userId: string,\n    ){}\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject } from 'rxjs';\nimport { map, switchMap, take, tap } from 'rxjs/operators';\nimport { AuthenticationService } from '../authentication/authentication.service';\nimport { AttendData } from './attend-data.model';\n\ninterface AttendDatas {\n  locationDate: string;\n  locationGenre: string;\n  locationId: string;\n  locationImage: string;\n  locationPrice: number;\n  locationTitle: string;\n  userId:string;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class AttendService {\n  private _attend = new BehaviorSubject<AttendData[]>([]);\n\n  get attend() {\n    return this._attend.asObservable();\n  }\n  constructor(\n    private authenticationService: AuthenticationService,\n    private httpClient: HttpClient\n  ) {}\n\n  confirmAttend(\n    locationId: string,\n    locatonImage: string,\n    locationDate: string,\n    locationTitle: string,\n    locationGenre: string,\n    locationPrice: number\n  ) {\n    let generatedId: string;\n    const newAttendData = new AttendData(\n      Math.random().toString(),\n      locatonImage,\n      locationDate,\n      locationTitle,\n      locationGenre,\n      locationPrice,\n      locationId,\n      this.authenticationService.userId\n    );\n    return this.httpClient\n      .post<{ name: string }>(\n        'https://eh-eventhour-default-rtdb.europe-west1.firebasedatabase.app/attendData.json',\n        { ...newAttendData, id: null }\n      )\n      .subscribe((data) => {\n        newAttendData.id = data.name;\n        this._attend.next(Object.values(this.attend).concat(newAttendData));\n      });\n  }\n\n  getDbAttendData() {\n    \n    return this.httpClient\n      .get<{ [key: string]: AttendDatas }>(\n        `https://eh-eventhour-default-rtdb.europe-west1.firebasedatabase.app/attendData.json?orderBy=\"userId\"&equalTo=\"${\n          this.authenticationService.userId\n        }\"`\n      )\n      .pipe(\n        map((responseData) => {\n          const attends = [];\n          for (const key in responseData) {\n            if (responseData.hasOwnProperty(key)) {\n                attends.push(\n                new AttendData(\n                  key,\n                  responseData[key].locationImage,\n                  responseData[key].locationDate,\n                  responseData[key].locationTitle,\n                  responseData[key].locationGenre,\n                  responseData[key].locationPrice,\n                  responseData[key].locationId,\n                  responseData[key].userId,\n                )\n              );\n            }\n          }\n          return attends;\n          // return [];\n        }),\n        tap((attends) => {\n          this._attend.next(attends);\n        })\n      );\n  }\n\n  cancelAttend(attendId: string) {\n    return this.httpClient\n      .delete(\n        `https://eh-eventhour-default-rtdb.europe-west1.firebasedatabase.app/attendData/${attendId}.json`\n      )\n      .pipe(\n        switchMap(() => {\n          return this.attend;\n        }),\n        take(1),\n        tap(attend => {\n          this._attend.next(attend.filter(a => a.id !== attendId));\n        })\n      );\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { modalController } from '@ionic/core';\nimport {Location} from '../../locations/location.model'\n\n@Component({\n  selector: 'app-confirm-attend',\n  templateUrl: './confirm-attend.component.html',\n  styleUrls: ['./confirm-attend.component.scss'],\n})\n\nexport class ConfirmAttendComponent implements OnInit {\n  @Input() selectedLocation: Location;\n\n  constructor(private mondalCtrl: ModalController) { }\n\n  ngOnInit() {}\n\n  onClose(){\n    this.mondalCtrl.dismiss(null, 'close', );\n  }\n  onVisitEvent(){\n    //TODO\n    this.mondalCtrl.dismiss({message: 'Hier ist ein Testmessage!'}, 'confirm');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LocationsDetailPage } from './locations-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LocationsDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LocationsDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LocationsDetailPageRoutingModule } from './locations-detail-routing.module';\n\nimport { LocationsDetailPage } from './locations-detail.page';\nimport { ConfirmAttendComponent } from '../../../attend/confirm-attend/confirm-attend.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LocationsDetailPageRoutingModule\n  ],\n  declarations: [\n    LocationsDetailPage,\n    ConfirmAttendComponent\n  ]\n})\nexport class LocationsDetailPageModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ModalController, NavController } from '@ionic/angular';\nimport { of, Subscription } from 'rxjs';\nimport { AttendService } from '../../../attend/attend.service';\nimport { ConfirmAttendComponent } from '../../../attend/confirm-attend/confirm-attend.component';\nimport { Location } from '../../location.model';\nimport { LocationsService } from '../../locations.service';\n\n@Component({\n  selector: 'app-locations-detail',\n  templateUrl: './locations-detail.page.html',\n  styleUrls: ['./locations-detail.page.scss'],\n})\nexport class LocationsDetailPage implements OnInit, OnDestroy {\n  location: Location;\n  private locationsSubscription: Subscription;\n  isLoading = false;\n\n  constructor(\n    private router: Router,\n    private navCtrl: NavController,\n    private route: ActivatedRoute,\n    private locationService: LocationsService,\n    private modalCtrl: ModalController,\n    private attendService: AttendService\n  ) {}\n\n  ngOnInit() {\n    this.route.paramMap.subscribe((paramMap) => {\n      if (!paramMap.has('locationId')) {\n        this.navCtrl.navigateBack('/search');\n        return;\n      }\n      this.isLoading = true;\n      this.locationsSubscription = this.locationService\n        .getLocation(paramMap.get('locationId'))\n        .subscribe((location) => {\n          this.location = location;\n          this.isLoading = false;\n        });\n    });\n  }\n\n  onVisitEvent() {\n    this.modalCtrl\n      .create({\n        component: ConfirmAttendComponent,\n        componentProps: { selectedLocation: this.location },\n      })\n      .then((modalElement) => {\n        modalElement.present();\n        return modalElement.onDidDismiss();\n      })\n\n      .then((resultData) => {\n        if (resultData.role === 'confirm') {\n          this.attendService.confirmAttend(\n            this.location.id,\n            this.location.imageUrl,\n            this.location.date,\n            this.location.title,\n            this.location.genre,\n            this.location.price\n          );\n          console.log('Teilgenommen!');\n        }\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.locationsSubscription) {\n      this.locationsSubscription.unsubscribe();\n    }\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>{{selectedLocation.title}}</ion-title>\\n    <ion-buttons slot=\\\"primary\\\">\\n      <ion-button (click)=\\\"onClose()\\\">\\n        <ion-icon name=\\\"close\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"welcome\\\" class=\\\"ion-padding\\\" class=\\\"ion-text-center\\\">\\n  <ion-grid fixed>\\n    <ion-row>\\n      <ion-col class=\\\"ion-padding\\\" size=\\\"12\\\">\\n        <h1>{{selectedLocation.title}} besuchen!</h1>\\n        <p>{{selectedLocation.description}}</p>\\n        <p>{{selectedLocation.date}}</p>\\n        <ion-button color=\\\"primary\\\" (click)=\\\"onVisitEvent()\\\" type=\\\"submit\\\">Jetzt Teilnehmen</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/search\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{location?.title}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-spinner *ngIf=\\\"isLoading\\\"></ion-spinner>\\n  <ion-img [src]=\\\"location.imageUrl\\\"></ion-img>\\n  <ion-grid class=\\\"ion-padding\\\" *ngIf =\\\"!isLoading\\\">\\n    <ion-row>\\n      <ion-col size=\\\"12\\\" class=\\\"detail-space\\\">\\n        <p class=\\\"date\\\">{{location.date}}</p>\\n        <h4>{{location.title}}</h4>\\n        <p>{{location.description}}</p>\\n        <p>Einlass: {{location.entrytime}} Uhr <br>\\n           Eintritt: {{location.price}} Euro <br>\\n           Genre: {{location.genre}}</p>\\n        <a href=\\\"https://www.google.com/maps/place/{{location.position.address}}\\\">{{location.position.address}}</a>\\n          <p></p><br>\\n        <ion-button color=\\\"primary\\\" (click)=\\\"onVisitEvent()\\\">Teilnehmen</ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n\\n\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}